" Plugins
call plug#begin('~/.vim/plug')
Plug 'ayu-theme/ayu-vim'
Plug 'easymotion/vim-easymotion'
Plug 'haya14busa/vim-operator-flashy'
    let g:operator#flashy#flash_time=300
    map y <Plug>(operator-flashy)
    nmap Y <Plug>(operator-flashy)$
Plug 'junegunn/vim-slash'
Plug 'kana/vim-operator-user'
Plug 'morhetz/gruvbox'
    let g:gruvbox_contrast_dark='soft'
Plug 'rhysd/vim-clang-format'
    let g:clang_format#detect_style_file=1
Plug 'sukima/xmledit'
Plug 'tpope/vim-commentary'
Plug 'tpope/vim-git'
Plug 'tpope/vim-repeat'
Plug 'tpope/vim-sleuth'
Plug 'tpope/vim-surround'
Plug 'ap/vim-buftabline'
Plug 'w0rp/ale'
    let g:ale_sign_error='x'
    let g:ale_sign_warning='!'
call plug#end()

" Escape insert mode by typing "jj" or "jk" quickly
imap jj <Esc>
imap jk <Esc>

" Allow single character insertions from normal mode
noremap <Space> i <Esc>r

" Allow :Q and :W
com W w
com Q q

" Clear the search highlight
nnoremap <silent> <return> :noh<return>

" Navigate with jkl; instead of hjkl
noremap ; l
noremap l k
noremap k j
noremap j h
noremap h <nop>

" Visual navigation by default, unless preceded by number
nnoremap <expr> k v:count ? 'j' : 'gj'
nnoremap <expr> l v:count ? 'k' : 'gk'

" Have x and c not modify registers
noremap x "_x
noremap c "_c

if has('nvim')
    " Make Esc escape Insert mode in NVIM terminal
    tnoremap <Esc> <C-\><C-n>
endif

" Alt+{Left,Right} to move between buffers
nnoremap <A-Left> :bp<return>
nnoremap <A-Right> :bn<return>
nnoremap <A-j> :bp<return>
nnoremap <A-;> :bn<return>

" Fast go to buffer
nnoremap gb :ls<CR>:b<Space>

" Alt+{Up,Down} to move between vertical splits
nnoremap <A-Down> <C-w>j
nnoremap <A-Up> <C-w>k
nnoremap <A-k> <C-w>j
nnoremap <A-l> <C-w>k

" Disable cursorline in insert mode
autocmd InsertEnter,InsertLeave * set cul!

syntax on
set backspace=indent,eol,start
set clipboard=unnamedplus
set complete-=i
set completeopt=longest,menuone
set colorcolumn=81,91
set copyindent
set directory=~/.vim/swap
set encoding=utf-8
set fillchars+=vert:\ 
set ignorecase
set hidden
set incsearch
set infercase
set laststatus=2
set list
set listchars=tab:→\ ,trail:·
set modeline
set mouse=a
set nocompatible
set noshowmatch
set nrformats-=octal
set number
set relativenumber
set omnifunc=syntaxcomplete#Complete
set ruler
set shiftwidth=4
set smartcase
set spell
set spelllang=en_ca
set so=3
set tabstop=4
set t_vb=
if !has('nvim') && &ttimeoutlen == -1
    set ttimeout
    set ttimeoutlen=500
endif
set timeout
set timeoutlen=500
set visualbell
set wildmenu

if v:version > 703 || v:version == 703 && has("patch541")
  set formatoptions+=j " Delete comment character when joining commented lines
endif

colo gruvbox
set background=dark
" I use a light theme in drop-down terminal
if !empty($XFCE_TERMINAL)
    set background=light
    let ayucolor="light"
    colo ayu
endif
hi Normal ctermbg=NONE
hi CursorLineNr ctermbg=NONE
hi SignColumn ctermbg=NONE
hi ALEErrorSign ctermbg=NONE ctermfg=Red cterm=bold
hi ALEWarningSign ctermbg=NONE ctermfg=Yellow cterm=bold

autocmd FileType c,cpp,objc map <buffer><Leader>rf <Plug>(operator-clang-format)
autocmd FileType yaml setlocal indentexpr=
